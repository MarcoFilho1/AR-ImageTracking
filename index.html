<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MindAR AutoStart</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>body{margin:0;overflow:hidden} a-scene{position:fixed;inset:0}</style>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; autoStart: true;"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      embedded
    >
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-box depth="0.05" width="1" height="0.6"
               material="opacity:.8;transparent:true;color:#39f"></a-box>
        <a-text value="FOUND!" align="center" position="0 0.4 0.03"></a-text>
      </a-entity>
    </a-scene>

    <script>
      const scene = document.querySelector('a-scene');

      // Fallback: se por algum motivo não autostartar, chamamos o system.start()
      scene.addEventListener('loaded', () => {
        const sys = scene.systems && scene.systems['mindar-image-system'];
        if (sys && typeof sys.start === 'function') {
          // pequeno atraso ajuda em alguns navegadores
          setTimeout(() => { try { sys.start(); } catch(e) { console.warn(e); } }, 50);
        }
      });
    </script>
  </body>
</html>
